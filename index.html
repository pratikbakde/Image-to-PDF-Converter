<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Image to PDF Converter with Camera & Editor</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Image to PDF Converter</h1>
            <p></p>
        </header>

        <main>
            <div class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <div class="upload-icon">üìÅ</div>
                        <h3>Drop images here or choose an option below</h3>
                        <p>Supports JPG, PNG, GIF, WebP</p>
                        
                        <div class="upload-options">
                            <button type="button" class="camera-btn" id="cameraBtn">
                                <span class="btn-icon">üì∑</span>
                                <span class="btn-text">Camera</span>
                            </button>
                            <button type="button" class="media-btn" id="mediaBtn">
                                <span class="btn-icon">üñºÔ∏è</span>
                                <span class="btn-text">Media</span>
                            </button>
                        </div>
                        
                        <input type="file" id="cameraInput" accept="image/*" capture style="display:none">
                        <input type="file" id="mediaInput" accept="image/*" multiple style="display:none">
                    </div>
                </div>
            </div>

            <div class="images-section" id="imagesSection" style="display: none;">
                <h3>Selected Images (<span id="imageCount">0</span>)</h3>
                <div class="images-grid" id="imagesGrid"></div>
                <div class="actions">
                    <button class="btn btn-secondary" onclick="clearImages()">Clear All</button>
                    <button class="btn btn-primary" onclick="generatePDF()" id="generateBtn">
                        <span class="btn-text">Generate PDF</span>
                        <span class="btn-loading" style="display: none;">Generating...</span>
                    </button>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; 2024 Image to PDF Converter. Made with ‚ù§Ô∏è</p>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3>Generating PDF...</h3>
            <p>Please wait while we process your images</p>
        </div>
    </div>

    <!-- Image Editor Modal -->
    <div id="editorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Image</h3>
                <div class="modal-actions">
                    <button class="save-btn" onclick="saveEditedImage()">Save Changes</button>
                    <button class="close-btn" onclick="closeEditor()">√ó</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="editor-container">
                    <div class="canvas-container">
                        <div id="cropContainer" style="display: none;">
                            <img id="cropImage" src="" alt="Crop Image">
                        </div>
                        <canvas id="editorCanvas"></canvas>
                    </div>
                    <div class="editor-controls">
                        <div class="control-group">
                            <h4>Transform</h4>
                            <div class="control-item">
                                <label>Rotate:</label>
                                <div class="button-group">
                                    <button onclick="rotateImage(-90)">‚Ü∂ Left</button>
                                    <button onclick="rotateImage(90)">‚Ü∑ Right</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <h4>Adjustments</h4>
                            <div class="control-item">
                                <label>Brightness:</label>
                                <input type="range" id="brightness" min="-100" max="100" value="0" onchange="adjustBrightness()">
                                <span id="brightnessValue">0</span>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <h4>Crop Tool</h4>
                            <div class="control-item">
                                <div class="button-group">
                                    <button onclick="enableAdvancedCrop()" class="btn btn-secondary">Enable Crop</button>
                                    <button onclick="resetCrop()" class="btn btn-secondary">Reset Crop</button>
                                </div>
                            </div>
                            <div class="control-item">
                                <label>Aspect Ratio:</label>
                                <select id="aspectRatio" onchange="setAspectRatio()">
                                    <option value="0.5625" selected>9:16 (Portrait)</option>
                                    <option value="1">Square (1:1)</option>
                                    <option value="4/3">4:3</option>
                                    <option value="3/4">3:4</option>
                                    <option value="16/9">16:9</option>
                                    <option value="NaN">Free</option>
                                </select>
                            </div>
                            <div class="control-item">
                                <label>Zoom: <span id="zoomValue">100%</span></label>
                                <input type="range" id="zoomLevel" min="0.1" max="3" step="0.1" value="1" onchange="setZoom()">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Camera Modal -->
    <div id="cameraModal" class="modal">
        <div class="modal-content camera-modal">
            <div class="modal-header">
                <h3>Take Photo</h3>
                <div class="modal-actions">
                    <button class="capture-btn" onclick="capturePhoto()">üì∏ Capture</button>
                    <button class="close-btn" onclick="closeCameraModal()">√ó</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="camera-container">
                    <video id="cameraVideo" autoplay playsinline></video>
                    <canvas id="cameraCanvas" style="display: none;"></canvas>
                </div>
                <div class="camera-controls">
                    <button class="btn btn-secondary" onclick="switchCamera()">üîÑ Switch Camera</button>
                    <button class="btn btn-secondary" onclick="retakePhoto()" id="retakeBtn" style="display: none;">üîÑ Retake</button>
                    <button class="btn btn-primary" onclick="usePhoto()" id="usePhotoBtn" style="display: none;">‚úÖ Use Photo</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html> 
