<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Image to PDF Converter with Camera & Editor</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üñºÔ∏è Image to PDF Converter</h1>
            <p>Convert your images to PDF with camera capture and powerful editing tools</p>
        </header>

        <main>
            <div class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <div class="upload-icon">üìÅ</div>
                        <h3>Drop images here or choose an option below</h3>
                        <p>Supports JPG, PNG, GIF, WebP</p>
                        
                        <div class="upload-options">
                            <button type="button" class="camera-btn" id="cameraBtn">
                                <span class="btn-icon">üì∑</span>
                                <span class="btn-text">Camera</span>
                            </button>
                            <button type="button" class="media-btn" id="mediaBtn">
                                <span class="btn-icon">üñºÔ∏è</span>
                                <span class="btn-text">Media</span>
                            </button>
                        </div>
                        
                        <!-- Camera Selection Dialog -->
                        <div id="cameraDialog" class="camera-dialog" style="display: none;">
                            <div class="camera-dialog-content">
                                <h4>Choose Camera</h4>
                                <div class="camera-options">
                                    <button type="button" class="camera-option" onclick="selectCamera('back')">
                                        <span class="camera-icon">üì∑</span>
                                        <span>Back Camera</span>
                                    </button>
                                    <button type="button" class="camera-option" onclick="selectCamera('front')">
                                        <span class="camera-icon">üì±</span>
                                        <span>Front Camera</span>
                                    </button>
                                    <button type="button" class="camera-option" onclick="selectCamera('any')">
                                        <span class="camera-icon">üéØ</span>
                                        <span>Any Camera</span>
                                    </button>
                                </div>
                                <button type="button" class="camera-cancel" onclick="closeCameraDialog()">Cancel</button>
                            </div>
                        </div>
                        
                        <input type="file" id="cameraInput" accept="image/*" capture="environment" style="display:none">
                        <input type="file" id="frontCameraInput" accept="image/*" capture="user" style="display:none">
                        <input type="file" id="anyCameraInput" accept="image/*" style="display:none">
                        <input type="file" id="mediaInput" accept="image/*" multiple style="display:none">
                    </div>
                </div>
            </div>

            <div class="images-section" id="imagesSection" style="display: none;">
                <h3>Selected Images (<span id="imageCount">0</span>)</h3>
                <div class="images-grid" id="imagesGrid"></div>
                <div class="actions">
                    <button class="btn btn-secondary" onclick="clearImages()">Clear All</button>
                    <button class="btn btn-primary" onclick="generatePDF()" id="generateBtn">
                        <span class="btn-text">Generate PDF</span>
                        <span class="btn-loading" style="display: none;">Generating...</span>
                    </button>
                </div>
            </div>

            <div class="features">
                <h3>Features</h3>
                <div class="features-grid">
                    <div class="feature">
                        <div class="feature-icon">üì∑</div>
                        <h4>Camera Capture</h4>
                        <p>Take photos directly with your device camera</p>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">‚úèÔ∏è</div>
                        <h4>Image Editor</h4>
                        <p>Rotate, crop, adjust brightness and more</p>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">üì±</div>
                        <h4>Multiple Images</h4>
                        <p>Upload and convert multiple images at once</p>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">‚ö°</div>
                        <h4>Fast Conversion</h4>
                        <p>Quick PDF generation in your browser</p>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; 2024 Image to PDF Converter. Made with ‚ù§Ô∏è</p>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3>Generating PDF...</h3>
            <p>Please wait while we process your images</p>
        </div>
    </div>

    <!-- Image Editor Modal -->
    <div id="editorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Image</h3>
                <button class="close-btn" onclick="closeEditor()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="editor-container">
                    <div class="canvas-container">
                        <div id="cropContainer" style="display: none;">
                            <img id="cropImage" src="" alt="Crop Image">
                        </div>
                        <canvas id="editorCanvas"></canvas>
                    </div>
                    <div class="editor-controls">
                        <div class="control-group">
                            <h4>Transform</h4>
                            <div class="control-item">
                                <label>Rotate:</label>
                                <button onclick="rotateImage(-90)">‚Ü∂ -90¬∞</button>
                                <button onclick="rotateImage(90)">‚Ü∑ +90¬∞</button>
                                <button onclick="rotateImage(180)">‚Üª 180¬∞</button>
                            </div>
                            <div class="control-item">
                                <label>Flip:</label>
                                <button onclick="flipImage('horizontal')">‚Üî Horizontal</button>
                                <button onclick="flipImage('vertical')">‚Üï Vertical</button>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <h4>Adjustments</h4>
                            <div class="control-item">
                                <label>Brightness:</label>
                                <input type="range" id="brightness" min="-100" max="100" value="0" onchange="adjustBrightness()">
                                <span id="brightnessValue">0</span>
                            </div>
                            <div class="control-item">
                                <label>Contrast:</label>
                                <input type="range" id="contrast" min="-100" max="100" value="0" onchange="adjustContrast()">
                                <span id="contrastValue">0</span>
                            </div>
                            <div class="control-item">
                                <label>Saturation:</label>
                                <input type="range" id="saturation" min="-100" max="100" value="0" onchange="adjustSaturation()">
                                <span id="saturationValue">0</span>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <h4>Crop Tool</h4>
                            <div class="control-item">
                                <button onclick="enableAdvancedCrop()" class="btn btn-secondary">Enable Crop</button>
                                <button onclick="resetCrop()" class="btn btn-secondary">Reset Crop</button>
                            </div>
                            <div class="control-item">
                                <label>Aspect Ratio:</label>
                                <select id="aspectRatio" onchange="setAspectRatio()">
                                    <option value="NaN">Free</option>
                                    <option value="1">1:1 (Square)</option>
                                    <option value="1.333">4:3</option>
                                    <option value="1.777">16:9</option>
                                    <option value="0.75">3:4</option>
                                    <option value="0.5625">9:16</option>
                                </select>
                            </div>
                            <div class="control-item">
                                <label>Zoom:</label>
                                <input type="range" id="zoomLevel" min="0.1" max="3" step="0.1" value="1" onchange="setZoom()">
                                <span id="zoomValue">100%</span>
                            </div>
                            <div class="control-item">
                                <button onclick="applyCrop()" class="btn btn-primary">Apply Crop</button>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <h4>Actions</h4>
                            <div class="control-item">
                                <button onclick="resetImage()" class="btn btn-secondary">Reset All</button>
                                <button onclick="saveEdits()" class="btn btn-primary">Save Changes</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
